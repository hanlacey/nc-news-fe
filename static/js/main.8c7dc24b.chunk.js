(this["webpackJsonpnc-news"]=this["webpackJsonpnc-news"]||[]).push([[0],{31:function(t,e,n){},32:function(t,e,n){},39:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var c=n(0),i=n.n(c),r=n(23),s=n.n(r),a=(n(31),n(32),n(3)),o=n(1),l=function(){return Object(o.jsx)(a.a,{to:"/nc-news-fe",children:Object(o.jsx)("header",{className:"Header",children:"NC News"})})},u=(n(39),n(61)),j=function(){return Object(o.jsxs)("div",{className:"Navbar",children:[Object(o.jsx)(a.a,{to:"/nc-news-fe/new",children:Object(o.jsx)("p",{children:"New post"})}),Object(o.jsx)(a.a,{to:"/nc-news-fe/users/jessjelly",children:Object(o.jsxs)("div",{id:"profile",children:[Object(o.jsx)("p",{children:"jessjelly"}),Object(o.jsx)(u.a,{})]})})]})},d=n(4),h=n(5),b=n(7),m=n(6),p=n(25),O=n.n(p).a.create({baseURL:"https://hannah-nc-news.herokuapp.com/api"}),f=function(t,e){var n=function(t,e){var n="";if(e||t){var c=[e?"topic=".concat(e):"",t?"sort_by=".concat(t):""].filter((function(t){return""!==t})).join("&");n+="?".concat(c)}return n}(t,e);return O.get("/articles".concat(n)).then((function(t){return t.data.articles}))},v=function(t){return O.get("/articles/".concat(t)).then((function(t){return t.data.article}))},x=function(t){return O.get("/articles/".concat(t,"/comments")).then((function(t){return t.data.comments}))},g=function(t,e){return O.post("articles/".concat(t,"/comments"),e).then((function(t){return t.data.comment}))},y=function(t){return O.delete("/comments/".concat(t))},C=function(t,e,n){return O.patch("/".concat(n,"s/").concat(t),{inc_votes:e}).then((function(t){return t.data[n].votes}))},w=function(t){return O.get("/users/".concat(t)).then((function(t){return t.data.user}))},_=function(t){return O.get("/articles?author=".concat(t)).then((function(t){return t.data.articles}))},A=function(t){return O.post("/articles/",t).then((function(t){return t.data.article.article_id}))},N=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={voteChanges:0},t.updateVotes=function(e,n,c){t.setState((function(t){return{voteChanges:t.voteChanges+n}})),C(e,n,c)},t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.element_id,c=e.votes,i=e.element,r=this.state.voteChanges;return Object(o.jsxs)("div",{className:"Voter",children:[Object(o.jsx)("button",{onClick:function(){return t.updateVotes(n,-1,i)},children:"-"}),c+r," votes",Object(o.jsx)("button",{onClick:function(){return t.updateVotes(n,1,i)},children:"+"})]})}}]),n}(c.Component),S=function(t){var e=new Date(t),n=e.toLocaleString("default",{day:"numeric",month:"2-digit",year:"2-digit"}),c=e.toLocaleString("default",{hour:"2-digit",minute:"2-digit"});return" ".concat(c," ").concat(n)},k=function(t){var e=t.article_id,n=t.author,c=t.title,i=t.topic,r=t.created_at,s=t.votes,l=t.comment_count,u=S(r);return Object(o.jsxs)("div",{className:"ArticleCard",children:[Object(o.jsxs)(a.a,{to:"/nc-news-fe/article/".concat(e),children:[" ",Object(o.jsxs)("h4",{children:[c," "]})]}),Object(o.jsxs)("div",{className:"ArticleCardBody",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)(a.a,{to:"/nc-news-fe/users/".concat(n),children:Object(o.jsx)("b",{children:n})})," ","in ",i," ",u]}),Object(o.jsxs)(a.a,{to:"/nc-news-fe/article/".concat(e),children:[l," comments"]})]}),Object(o.jsx)("div",{id:"home",children:Object(o.jsx)(N,{element_id:e,votes:s,element:"article"})})]})},L=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={topics:[],isLoading:!0},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this;O.get("/topics").then((function(t){return t.data.topics})).then((function(e){t.setState({topics:e,isLoading:!1})}))}},{key:"render",value:function(){var t=this.state.topics;return Object(o.jsx)("div",{className:"TopicSelector",children:t.map((function(t){var e=t.slug;return Object(o.jsx)("button",{id:e,children:Object(o.jsxs)(a.a,{to:"/nc-news-fe/articles/".concat(e),children:[e," "]})},e)}))})}}]),n}(c.Component),D=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={articles:[],isLoading:!0,topic:"",sort_by:"created_at"},t.setSortBy=function(e){t.setState({sort_by:e})},t.getArticles=function(){var e=t.state.sort_by,n=t.props.topic;f(e,n).then((function(e){t.setState({articles:e,isLoading:!1})}))},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getArticles()}},{key:"componentDidUpdate",value:function(t,e){var n=this.props.topic,c=this.state.sort_by;n===t.topic&&c===e.sort_by||this.getArticles()}},{key:"render",value:function(){var t=this,e=this.state,n=e.articles,c=e.isLoading;return Object(o.jsxs)("div",{className:"ArticleList-page",children:[Object(o.jsx)(L,{}),Object(o.jsxs)("div",{className:"SortBy",children:["sort by:"," ",Object(o.jsx)("button",{onClick:function(){t.setSortBy("votes")},children:"votes"}),Object(o.jsx)("button",{onClick:function(){t.setSortBy("created_at")},children:"recent"}),Object(o.jsx)("button",{onClick:function(){t.setSortBy("comment_count")},children:"comments"})]}),Object(o.jsx)("ul",{className:"ArticleList-list ",children:c?Object(o.jsx)("p",{children:"Loading..."}):n.map((function(t){var e=t.article_id,n=t.author,c=t.title,i=t.topic,r=t.created_at,s=t.votes,a=t.comment_count;return Object(o.jsx)(k,{article_id:e,author:n,title:c,topic:i,created_at:r,votes:s,comment_count:a},e)}))})]})}}]),n}(c.Component),B=n(26),U=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={comment:""},t.storeComment=function(e){var n=e.target.value;t.setState({comment:n})},t.submitComment=function(e){e.preventDefault();var n=t.props.article_id,c={author:"jessjelly",body:t.state.comment};g(n,c).then((function(e){t.setState({comment:""}),t.props.displayNewComment(e)}))},t}return Object(h.a)(n,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{className:"CommentPoster",onSubmit:this.submitComment,children:[Object(o.jsx)("label",{children:"Add a comment:"}),Object(o.jsx)("textarea",{name:"comment",onChange:this.storeComment,value:this.state.comment}),Object(o.jsx)("button",{children:"Post"})]})})}}]),n}(c.Component),P=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={article:{},comments:[],isLoading:!0},t.getArticle=function(e){v(e).then((function(e){t.setState({article:e})}))},t.getComments=function(e){x(e).then((function(e){t.setState({comments:e,isLoading:!1})}))},t.displayNewComment=function(e){t.setState((function(t){return{comments:[e].concat(Object(B.a)(t.comments))}})),t.getArticle(t.state.article.article_id)},t.deleteComment=function(e){y(e).then((function(){t.getComments(t.props.article_id),t.getArticle(t.state.article.article_id)}))},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.article_id;this.getArticle(t),this.getComments(t)}},{key:"render",value:function(){var t=this,e=this.state,n=e.article,c=e.comments,i=e.isLoading,r=n.author,s=n.body,l=n.comment_count,u=n.created_at,j=n.title,d=n.topic,h=n.votes,b=this.props.article_id,m=S(u);return i?Object(o.jsx)("p",{children:"Loading..."}):Object(o.jsxs)("div",{className:"ArticlePage",children:[Object(o.jsxs)("section",{className:"FullArticle",children:[Object(o.jsx)("h2",{children:j}),Object(o.jsxs)("h4",{children:[Object(o.jsx)("div",{children:m}),"posted by ",Object(o.jsx)(a.a,{to:"/nc-news-fe/users/".concat(r),children:r})," ","to ",d]}),Object(o.jsx)("div",{id:"text-wrapper",children:Object(o.jsx)("p",{id:"body",children:s})}),Object(o.jsx)("div",{id:"article-page",children:Object(o.jsx)(N,{element_id:b,votes:h,element:"article"})})]}),Object(o.jsxs)("div",{className:"article-comments-container",children:[Object(o.jsx)(U,{displayNewComment:this.displayNewComment,article_id:b}),Object(o.jsxs)("h4",{children:[l," comments"]}),c.map((function(e){var n=e.author,c=e.comment_id,i=e.body,r=(e.created_at,e.votes);return Object(o.jsxs)("div",{className:"CommentCard",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)(a.a,{to:"/nc-news-fe/users/".concat(n),children:n})," at"," ",m,":"]}),Object(o.jsx)("p",{children:i}),"jessjelly"===n?Object(o.jsx)("div",{id:"yourComment",children:Object(o.jsx)("button",{onClick:function(){t.deleteComment(c)},children:"Delete comment"})}):Object(o.jsx)("div",{id:"notYourComment"}),Object(o.jsx)(N,{element_id:c,votes:r,element:"comment"})," "]},c)}))]})]})}}]),n}(c.Component),M=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={user:{},articles:[],isLoading:!0},t.getUser=function(){w(t.props.username).then((function(e){t.setState({user:e})}))},t.getUserArticles=function(){_(t.props.username).then((function(e){t.setState({articles:e}),t.setState({isLoading:!1})}))},t.userArticleList=function(){},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getUser(),this.getUserArticles()}},{key:"render",value:function(){var t=this.state,e=t.isLoading,n=t.articles,c=this.state.user,i=c.username,r=c.name,s=c.avatar_url;return console.log(n),e?Object(o.jsx)("div",{children:"Loading"}):Object(o.jsxs)("div",{className:"UserProfile",children:[Object(o.jsxs)("div",{id:"bio",children:[Object(o.jsxs)("p",{children:[r," : ",i]}),Object(o.jsx)("img",{src:s,alt:"avatar"})]}),Object(o.jsxs)("div",{id:"article-list",children:[Object(o.jsxs)("p",{children:[i,"'s articles"]}),n.map((function(t){return Object(o.jsxs)("div",{id:"article-wrapper",children:[Object(o.jsx)("div",{id:"user-article-link",children:Object(o.jsx)(a.a,{to:"/nc-news-fe/article/".concat(t.article_id),children:t.title})}),Object(o.jsxs)("div",{id:"user-article-topic",children:["in ",t.topic]})]})}))]})]})}}]),n}(c.Component),I=n(11),V=function(t){Object(b.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(d.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={postedArticleId:0},t.submitArticle=function(t){t.preventDefault();var e={author:"jessjelly",title:t.target[0].value,body:t.target[1].value,topic:t.target[2].value.toLowerCase()};A(e)},t}return Object(h.a)(n,[{key:"render",value:function(){return this.state.postedArticleId?Object(o.jsx)(a.b,{to:"/articles/".concat(this.state.postedArticleId)}):Object(o.jsx)("form",{onSubmit:this.submitArticle,children:Object(o.jsxs)(I.a.Group,{className:"PostArticle",children:[Object(o.jsx)(I.a.Control,{placeholder:"Title"}),Object(o.jsx)(I.a.Control,{id:"body",placeholder:""}),Object(o.jsxs)("div",{id:"select",children:[Object(o.jsx)(I.a.Label,{id:"label",children:"Post to:"}),Object(o.jsxs)(I.a.Control,{id:"dropdown",as:"select",children:[Object(o.jsx)("option",{children:"Coding"}),Object(o.jsx)("option",{children:"Cooking"}),Object(o.jsx)("option",{children:"Football"})]})]}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})})}}]),n}(c.Component);var F=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(l,{}),Object(o.jsx)(j,{}),Object(o.jsxs)(a.c,{children:[Object(o.jsx)(D,{path:"/nc-news-fe"}),Object(o.jsx)(D,{path:"/nc-news-fe/articles/:topic"}),Object(o.jsx)(P,{path:"/nc-news-fe/article/:article_id"}),Object(o.jsx)(M,{path:"/nc-news-fe/users/:username"}),Object(o.jsx)(V,{path:"/nc-news-fe/new"})]})]})};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(F,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.8c7dc24b.chunk.js.map